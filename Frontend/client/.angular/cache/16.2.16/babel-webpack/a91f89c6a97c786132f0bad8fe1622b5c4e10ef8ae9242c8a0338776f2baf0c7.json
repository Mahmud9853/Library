{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nexport let CategoryListComponent = class CategoryListComponent {\n  constructor(categoryService, router, accountService) {\n    this.categoryService = categoryService;\n    this.router = router;\n    this.accountService = accountService;\n    this.categories = [];\n    this.categoryToDelete = null;\n    this.role = null;\n    this.role = this.accountService.getRole();\n  }\n  ngOnInit() {\n    this.loadCategory();\n  }\n  loadCategory() {\n    this.categoryService.getCategories().subscribe({\n      next: response => {\n        console.log('API Response:', response);\n        this.categories = response;\n      },\n      error: error => console.log('Error fetching categories:', error)\n    });\n  }\n  openDeleteModal(category) {\n    this.categoryToDelete = category;\n    const deleteModal = document.getElementById('deleteModal');\n    if (deleteModal) {\n      const modal = new window.bootstrap.Modal(deleteModal); // 'window as any' ile tip belirtme\n      modal.show();\n    }\n  }\n  confirmDelete() {\n    if (this.categoryToDelete) {\n      // API çağrısı yapılır\n      this.categoryService.deleteCategory(this.categoryToDelete.id).subscribe({\n        next: response => {\n          // Silme işleminden sonra kitap listesine ekleme\n          console.log('Delete response:', response); // '4: Deleted.'\n          this.categories = this.categories.filter(b => b.id !== this.categoryToDelete.id);\n          // Modalı kapat\n          const deleteModal = document.getElementById('deleteModal');\n          if (deleteModal) {\n            const modalInstance = window.bootstrap.Modal.getInstance(deleteModal);\n            modalInstance?.hide(); // Modal'ı kapat\n          }\n          // Kitaplar silindikten sonra yönlendirme yapılır\n          this.router.navigate(['/admin/category/category-list']);\n          this.categoryToDelete = null;\n        },\n        error: err => {\n          console.error('Error deleting category:', err);\n        }\n      });\n    }\n  }\n};\nCategoryListComponent = __decorate([Component({\n  selector: 'app-category-list',\n  templateUrl: './category-list.component.html',\n  styleUrls: ['./category-list.component.scss']\n})], CategoryListComponent);","map":{"version":3,"names":["Component","CategoryListComponent","constructor","categoryService","router","accountService","categories","categoryToDelete","role","getRole","ngOnInit","loadCategory","getCategories","subscribe","next","response","console","log","error","openDeleteModal","category","deleteModal","document","getElementById","modal","window","bootstrap","Modal","show","confirmDelete","deleteCategory","id","filter","b","modalInstance","getInstance","hide","navigate","err","__decorate","selector","templateUrl","styleUrls"],"sources":["D:\\MMU\\Frontend\\client\\src\\app\\admin\\category\\category-list\\category-list.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { Category } from 'src/app/shared/models/category';\nimport { AccountService } from 'src/app/account/account.service';\n\n@Component({\n  selector: 'app-category-list',\n  templateUrl: './category-list.component.html',\n  styleUrls: ['./category-list.component.scss']\n})\nexport class CategoryListComponent  implements OnInit {\n  categories: any[] = [];\n  categoryToDelete: any = null;\n  role: string | null = null;\n constructor(private categoryService: CategoryService, private router: Router, private accountService: AccountService) { \n   this.role = this.accountService.getRole()\n\n }\n\n  ngOnInit() {\n   this.loadCategory();\n }\n loadCategory() {\n  this.categoryService.getCategories().subscribe({\n   next: (response: any) => {\n      console.log('API Response:', response);\n        this.categories = response;\n    },\n      error: error => console.log('Error fetching categories:', error)\n    })\n  }\n  openDeleteModal(category: any) {\n    this.categoryToDelete = category;\n    const deleteModal = document.getElementById('deleteModal');\n    if (deleteModal) {\n      const modal = new (window as any).bootstrap.Modal(deleteModal); // 'window as any' ile tip belirtme\n      modal.show();\n    }\n  }\n  confirmDelete() {\n    if (this.categoryToDelete) {\n      // API çağrısı yapılır\n      this.categoryService.deleteCategory(this.categoryToDelete.id).subscribe({\n        next: (response: string) => {\n          // Silme işleminden sonra kitap listesine ekleme\n          console.log('Delete response:', response); // '4: Deleted.'\n          this.categories = this.categories.filter((b) => b.id !== this.categoryToDelete.id);\n  \n          // Modalı kapat\n          const deleteModal = document.getElementById('deleteModal');\n          if (deleteModal) {\n            const modalInstance = (window as any).bootstrap.Modal.getInstance(deleteModal);\n            modalInstance?.hide(); // Modal'ı kapat\n          }\n  \n          // Kitaplar silindikten sonra yönlendirme yapılır\n          this.router.navigate(['/admin/category/category-list']);\n          this.categoryToDelete = null;\n        },\n        error: (err) => {\n          console.error('Error deleting category:', err);\n        },\n      });\n    }\n  }\n\n\n}\n"],"mappings":";AAAA,SAASA,SAAS,QAAgB,eAAe;AAU1C,WAAMC,qBAAqB,GAA3B,MAAMA,qBAAqB;EAIjCC,YAAoBC,eAAgC,EAAUC,MAAc,EAAUC,cAA8B;IAAhG,KAAAF,eAAe,GAAfA,eAAe;IAA2B,KAAAC,MAAM,GAANA,MAAM;IAAkB,KAAAC,cAAc,GAAdA,cAAc;IAHnG,KAAAC,UAAU,GAAU,EAAE;IACtB,KAAAC,gBAAgB,GAAQ,IAAI;IAC5B,KAAAC,IAAI,GAAkB,IAAI;IAEzB,IAAI,CAACA,IAAI,GAAG,IAAI,CAACH,cAAc,CAACI,OAAO,EAAE;EAE3C;EAECC,QAAQA,CAAA;IACP,IAAI,CAACC,YAAY,EAAE;EACrB;EACAA,YAAYA,CAAA;IACX,IAAI,CAACR,eAAe,CAACS,aAAa,EAAE,CAACC,SAAS,CAAC;MAC9CC,IAAI,EAAGC,QAAa,IAAI;QACrBC,OAAO,CAACC,GAAG,CAAC,eAAe,EAAEF,QAAQ,CAAC;QACpC,IAAI,CAACT,UAAU,GAAGS,QAAQ;MAC9B,CAAC;MACCG,KAAK,EAAEA,KAAK,IAAIF,OAAO,CAACC,GAAG,CAAC,4BAA4B,EAAEC,KAAK;KAChE,CAAC;EACJ;EACAC,eAAeA,CAACC,QAAa;IAC3B,IAAI,CAACb,gBAAgB,GAAGa,QAAQ;IAChC,MAAMC,WAAW,GAAGC,QAAQ,CAACC,cAAc,CAAC,aAAa,CAAC;IAC1D,IAAIF,WAAW,EAAE;MACf,MAAMG,KAAK,GAAG,IAAKC,MAAc,CAACC,SAAS,CAACC,KAAK,CAACN,WAAW,CAAC,CAAC,CAAC;MAChEG,KAAK,CAACI,IAAI,EAAE;;EAEhB;EACAC,aAAaA,CAAA;IACX,IAAI,IAAI,CAACtB,gBAAgB,EAAE;MACzB;MACA,IAAI,CAACJ,eAAe,CAAC2B,cAAc,CAAC,IAAI,CAACvB,gBAAgB,CAACwB,EAAE,CAAC,CAAClB,SAAS,CAAC;QACtEC,IAAI,EAAGC,QAAgB,IAAI;UACzB;UACAC,OAAO,CAACC,GAAG,CAAC,kBAAkB,EAAEF,QAAQ,CAAC,CAAC,CAAC;UAC3C,IAAI,CAACT,UAAU,GAAG,IAAI,CAACA,UAAU,CAAC0B,MAAM,CAAEC,CAAC,IAAKA,CAAC,CAACF,EAAE,KAAK,IAAI,CAACxB,gBAAgB,CAACwB,EAAE,CAAC;UAElF;UACA,MAAMV,WAAW,GAAGC,QAAQ,CAACC,cAAc,CAAC,aAAa,CAAC;UAC1D,IAAIF,WAAW,EAAE;YACf,MAAMa,aAAa,GAAIT,MAAc,CAACC,SAAS,CAACC,KAAK,CAACQ,WAAW,CAACd,WAAW,CAAC;YAC9Ea,aAAa,EAAEE,IAAI,EAAE,CAAC,CAAC;;UAGzB;UACA,IAAI,CAAChC,MAAM,CAACiC,QAAQ,CAAC,CAAC,+BAA+B,CAAC,CAAC;UACvD,IAAI,CAAC9B,gBAAgB,GAAG,IAAI;QAC9B,CAAC;QACDW,KAAK,EAAGoB,GAAG,IAAI;UACbtB,OAAO,CAACE,KAAK,CAAC,0BAA0B,EAAEoB,GAAG,CAAC;QAChD;OACD,CAAC;;EAEN;CAGD;AAzDYrC,qBAAqB,GAAAsC,UAAA,EALjCvC,SAAS,CAAC;EACTwC,QAAQ,EAAE,mBAAmB;EAC7BC,WAAW,EAAE,gCAAgC;EAC7CC,SAAS,EAAE,CAAC,gCAAgC;CAC7C,CAAC,C,EACWzC,qBAAqB,CAyDjC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}